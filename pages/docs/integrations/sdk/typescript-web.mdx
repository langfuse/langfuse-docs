---
description: Web SDK to report scores from the browser based on user interactions and feedback
---

import { Tab, Tabs } from "nextra-theme-docs";

# JS/TS SDK (Web)

[![npm package](https://img.shields.io/npm/v/langfuse?style=flat-square)](https://www.npmjs.com/package/langfuse)

## Introduction

The Langfuse Web SDK can be used to report scores client-side directly from the browser. It is commonly used to ingest scores into Langfuse which are based on implicit user interactions and feedback.

‚Üí Read more on [Scores in Langfuse](/docs/scores)

```typescript {1, 9, 17-18} filename="UserFeedbackComponent.tsx"
import { LangfuseWeb } from "langfuse";

export function UserFeedbackComponent(props: { traceId: string }) {
  const langfuseWeb = new LangfuseWeb({
    publicKey: env.NEXT_PUBLIC_LANGFUSE_PUBLIC_KEY,
  });

  const handleUserFeedback = async (value: number) =>
    await langfuseWeb.score({
      traceId: props.traceId,
      name: "user_feedback",
      value,
    });

  return (
    <div>
      <button onClick={() => handleUserFeedback(1)}>üëç</button>
      <button onClick={() => handleUserFeedback(0)}>üëé</button>
    </div>
  );
}
```

## Example

We integrated the Web SDK into the Vercel AI Chatbot project to collect user feedback on individual messages. Read the [blog post](/blog/showcase-llm-chatbot) for more details and code examples.

<div className="max-w-2xl overflow-hidden mt-6 rounded-xl shadow-lg ring-1 ring-slate-700">
  ![User feedback modal](/images/blog/ai-chatbot/feedback.gif)
</div>

## 1. Initializing the client

```sh npm2yarn
npm i langfuse
```

For Deno (ESM CDN): `https://esm.sh/langfuse`

The LangfuseWeb client is initialized with only the public key which can be safely exposed to users. It is scoped to only allow reporting scores and does not allow access to any other data.

```typescript filename="frontend.ts"
import { LangfuseWeb } from "langfuse";

const langfuseWeb = new LangfuseWeb({
  publicKey: process.env.LANGFUSE_PUBLIC_KEY, // pk-lf-...
  // baseUrl: defaults to "https://cloud.langfuse.com"
});
```

Hint for Next.js users: prefix the public key with `NEXT_PUBLIC_` to make it available in the frontend.

## 2. Collect scores

Scores are used to evaluate executions/traces. They are attached to a single trace. If the score relates to a specific step of the trace, the score can optionally also be attached to the observation to enable evaluating it specifically.

‚Üí Read more on [Scores in Langfuse](/docs/scores)

import { Callout } from "nextra/components";

<Callout type="info" emoji="‚ÑπÔ∏è">
  While integrating Langfuse, it is important to either include the Langfuse Ids
  in the response to the frontend or to use an own id (as an ExternalId) which
  is available in both backend and frontend.
</Callout>

Attributes

> - `traceId`: the id of the trace to which the score should be attached
>   - Passed from backend: `traceId = (await trace.data).id`
> - `name`: identifier of the score, string
> - `value`: the value of the score; float; optional: scale it to e.g. 0..1 to make it comparable to other scores
> - `observationId` (optional): the id of the span, event or generation to which the score should be attached
>   - Passed from backend, e.g.: `observationId = (await generation.data).id`
> - `traceIdType` (optional): the type of the traceId. Can be `LANGFUSE` (default) or `EXTERNAL`. If `EXTERNAL` is used, the score will be attached to the trace with the given externalId.
> - `comment` (optional): additional context/explanation of the score

```typescript filename="frontend.ts"
// with Langfuse trace id
await langfuseWeb.score({
  traceId: message.traceId,
  name: "user-feedback",
  value: 1,
  observationId: generation.id,
  comment: "I like how personalized the response is",
});
```

LangfuseWeb returns a promise that resolves when the score is created. Commonly the promise is awaited in the frontend to ensure that the score is created before the UI response is sent to the user.

## Troubleshooting

If you encounter any issue, we are happy to help on [Discord](https://discord.gg/7NXusRtqYU) or shoot us an email: help@langfuse.com

---
description: User-level LLM observability to track token usage, usage volume and individual user feedback.
sidebarTitle: User Tracking
---

# User Tracking

The Users view provides an overview of all users. It also offers an in-depth look into individual users.

<Video
  src="https://static.langfuse.com/docs-videos/tracing-users.mp4"
  aspectRatio={1696 / 1080}
  gifStyle
/>

It's easy to map data in Langfuse to individual users. Just pass a unique identifier as the `user_id` / `userId` when you create a trace. This can be a username, email, or any other unique identifier. The `user_id` / `userId` is optional, but using it helps you get more from Langfuse.

Use `propagate_attributes()` / `propagateAttributes()` to ensure the user identifier applies to all spans in the trace, enabling accurate per-user analytics and cost tracking. See the [Attribute Propagation](/docs/observability/features/attribute-propagation) page for comprehensive examples and best practices.

<LangTabs items={["Python SDK", "JS/TS SDK", "OpenAI (Python)", "Langchain (Python)", "Langchain (JS/TS)", "Flowise"]}>
<Tab>

```python
from langfuse import observe, propagate_attributes

@observe()
def process_user_request(user_query):
    user = authenticate(user_query)

    with propagate_attributes(user_id=user.id):
        return process_pipeline(user_query)
```

See [Attribute Propagation](/docs/observability/features/attribute-propagation) for more details.

</Tab>
<Tab title="JS/TS SDK">

```ts
import { observe, propagateAttributes } from "@langfuse/tracing";

const processUserRequest = observe(async (userQuery: string) => {
  const user = await authenticate(userQuery);

  return await propagateAttributes({
    userId: user.id
  }, async () => {
    return await processPipeline(userQuery);
  });
}, { name: 'process-user-request' });
```

See [Attribute Propagation](/docs/observability/features/attribute-propagation) for more details.

</Tab>
<Tab>

```python
from langfuse.openai import openai

completion = openai.chat.completions.create(
  name="test-chat",
  model="gpt-3.5-turbo",
  messages=[
    {"role": "system", "content": "You are a calculator."},
    {"role": "user", "content": "1 + 1 = "}],
  temperature=0,
  metadata={"langfuse_user_id": "user-id"}
)
```

</Tab>
<Tab title="OpenAI (Python)">

Use metadata in chain invocation:

```python
from langfuse.langchain import CallbackHandler

handler = CallbackHandler()

# Pass langfuse_user_id as metadata to the chain invocation
chain.invoke(
    {"animal": "dog"},
    config={
        "callbacks": [handler],
        "metadata": {
            "langfuse_user_id": "user-id",
        },
    },
)
```

</Tab>
<Tab title="Langchain (Python)">

When using the [CallbackHandler](/integrations/frameworks/langchain), you can pass `userId` to the constructor:

```ts
const handler = new CallbackHandler({
  userId: "user-id",
});
```

You can also set the `userId` dynamically via the runnable configuration in the chain invocation:

```ts
import { CallbackHandler } from "langfuse-langchain";

const langfuseHandler = new CallbackHandler();

// Your existing Langchain code to create the chain
...

// Pass langfuseUserId as metadata to the chain invocation to be parsed as the Langfuse user_id
await chain.invoke(
  { input: "<user_input>" },
  { callbacks: [langfuseHandler], metadata: { langfuseUserId: "user-id" } }
);
```

When using the integration with the JS SDK (see [interop docs](/integrations/frameworks/langchain#interoperability)), set `userId` via `langfuse.trace()`:

```ts
import { CallbackHandler, Langfuse } from "langfuse-langchain";
const langfuse = new Langfuse();

const trace = langfuse.trace({
  userId: "user-id",
});
const langfuseHandler = new CallbackHandler({ root: trace });

// Add Langfuse handler as callback to your langchain chain/agent
await chain.invoke({ input: "<user_input>" }, { callbacks: [langfuseHandler] });
```

</Tab>

<Tab title="Flowise">
You can set the `userId` via the override configs, see the [Flowise Integration docs](/docs/flowise) for more details.

</Tab>

</LangTabs>

## View all users

The user list provides an overview of all users that have been tracked by Langfuse. It makes it simple to segment by overall token usage, number of traces, and user feedback.

<Frame fullWidth>![User List](/images/docs/users-list.png)</Frame>

## Individual user view

The individual user view provides an in-depth look into a single user. Explore aggregated metrics or view all traces and feedback for a user.

<Video
  src="https://static.langfuse.com/docs-videos/user-table.mp4"
  aspectRatio={1592 / 1080}
  gifStyle
/>

You can deep link to this view via the following URL format: `https://<hostname>/project/{projectId}/users/{userId}`

## GitHub Discussions

import { GhDiscussionsPreview } from "@/components/gh-discussions/GhDiscussionsPreview";

<GhDiscussionsPreview labels={["feat-users"]} />

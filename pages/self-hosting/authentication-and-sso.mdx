# Authentication and SSO

Langfuse supports both email/password and SSO authentication.

## Email/Password [#auth-email-password]

Email/password authentication is enabled by default. Users can sign up and log in using their email and password.

To disable email/password authentication, set `AUTH_DISABLE_USERNAME_PASSWORD=true`. In this case, you need to set up [SSO](#sso) instead.

If you want to provision a default user for your Langfuse instance, you can use the [`LANGFUSE_INIT_*`](#initialization) environment variables.

**Password Reset**

- **If transactional emails are configured** on your instance via the `SMTP_CONNECTION_URL` and `EMAIL_FROM_ADDRESS` environments, users can reset their password by using the "Forgot password" link on the login page.

- **If transactional emails are not set up**, passwords can be reset by following these steps:

1.  Update the email associated with your user account in database, such as by adding a prefix.
2.  You can then sign up again with a new password.
3.  Reassign any organizations you were associated with via the `organization_memberships` table in database.
4.  Finally, remove the old user account from the `users` table in database.

## SSO

To enable OAuth/SSO provider sign-in for Langfuse, add the following environment variables:

| Provider                                                                                                                                                                         | Variables                                                                                                                                                                                                                                                                                                                                | OAuth Redirect URL                     |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------- |
| [Google](https://next-auth.js.org/providers/google)                                                                                                                              | `AUTH_GOOGLE_CLIENT_ID`<br/>`AUTH_GOOGLE_CLIENT_SECRET`<br/><br/>`AUTH_GOOGLE_ALLOW_ACCOUNT_LINKING=true` (optional)<br/>`AUTH_GOOGLE_ALLOWED_DOMAINS=langfuse.com,google.com`(optional, list of allowed domains based on [`hd` OAuth claim](https://developers.google.com/identity/openid-connect/openid-connect#an-id-tokens-payload)) | `/api/auth/callback/google`            |
| [GitHub](https://next-auth.js.org/providers/github)                                                                                                                              | `AUTH_GITHUB_CLIENT_ID`<br/>`AUTH_GITHUB_CLIENT_SECRET`<br/><br/>`AUTH_GITHUB_ALLOW_ACCOUNT_LINKING=true` (optional)                                                                                                                                                                                                                     | `/api/auth/callback/github`            |
| GitHub Enterprise                                                                                                                                                                | `AUTH_GITHUB_ENTERPRISE_CLIENT_ID`<br/>`AUTH_GITHUB_ENTERPRISE_CLIENT_SECRET`<br/>`AUTH_GITHUB_ENTERPRISE_BASE_URL`<br/><br/>`AUTH_GITHUB_ENTERPRISE_ALLOW_ACCOUNT_LINKING=false` (optional)                                                                                                                                             | `/api/auth/callback/github-enterprise` |
| [GitLab](https://next-auth.js.org/providers/gitlab)                                                                                                                              | `AUTH_GITLAB_CLIENT_ID`<br/>`AUTH_GITLAB_CLIENT_SECRET`<br/><br/>`AUTH_GITLAB_ISSUER` (optional)<br/>`AUTH_GITLAB_ALLOW_ACCOUNT_LINKING=true` (optional)                                                                                                                                                                                 | `/api/auth/callback/gitlab`            |
| [AzureAD/Entra ID](https://next-auth.js.org/providers/azure-ad)                                                                                                                  | `AUTH_AZURE_AD_CLIENT_ID`<br/>`AUTH_AZURE_AD_CLIENT_SECRET`<br/>`AUTH_AZURE_AD_TENANT_ID`<br/><br/>`AUTH_AZURE_ALLOW_ACCOUNT_LINKING=true` (optional)                                                                                                                                                                                    | `/api/auth/callback/azure-ad`          |
| [Okta](https://next-auth.js.org/providers/okta)                                                                                                                                  | `AUTH_OKTA_CLIENT_ID`<br/>`AUTH_OKTA_CLIENT_SECRET`<br/>`AUTH_OKTA_ISSUER`<br/><br/>`AUTH_OKTA_ALLOW_ACCOUNT_LINKING=true` (optional)                                                                                                                                                                                                    | `/api/auth/callback/okta`              |
| [Auth0](https://next-auth.js.org/providers/auth0)                                                                                                                                | `AUTH_AUTH0_CLIENT_ID`<br/>`AUTH_AUTH0_CLIENT_SECRET`<br/>`AUTH_AUTH0_ISSUER`<br/><br/>`AUTH_AUTH0_ALLOW_ACCOUNT_LINKING=true` (optional)                                                                                                                                                                                                | `/api/auth/callback/auth0`             |
| [AWS Cognito](https://next-auth.js.org/providers/cognito)                                                                                                                        | `AUTH_COGNITO_CLIENT_ID`<br/>`AUTH_COGNITO_CLIENT_SECRET`<br/>`AUTH_COGNITO_ISSUER`<br/><br/>`AUTH_COGNITO_ALLOW_ACCOUNT_LINKING=true` (optional)                                                                                                                                                                                        | `/api/auth/callback/cognito`           |
| [Keycloak](https://next-auth.js.org/providers/keycloak)                                                                                                                          | `AUTH_KEYCLOAK_CLIENT_ID`<br/>`AUTH_KEYCLOAK_CLIENT_SECRET`<br/>`AUTH_KEYCLOAK_ISSUER`<br/><br/>`AUTH_KEYCLOAK_ALLOW_ACCOUNT_LINKING=true` (optional)                                                                                                                                                                                    | `/api/auth/callback/keycloak`          |
| [Custom OAuth](https://next-auth.js.org/configuration/providers/oauth#using-a-custom-provider) ([source](https://github.com/langfuse/langfuse/blob/main/web/src/server/auth.ts)) | `AUTH_CUSTOM_CLIENT_ID`<br/>`AUTH_CUSTOM_CLIENT_SECRET`<br/>`AUTH_CUSTOM_ISSUER`<br/>`AUTH_CUSTOM_NAME` (any, used only in UI)<br/><br/>`AUTH_CUSTOM_ALLOW_ACCOUNT_LINKING=true` (optional)<br/><br/>`AUTH_CUSTOM_SCOPE` (optional, defaults to `"openid email profile"`)                                                                | `/api/auth/callback/custom`            |

Use `*_ALLOW_ACCOUNT_LINKING` to allow merging accounts with the same email address. This is useful when users sign in with different providers or email/password but have the same email address. You need to be careful with this setting as it can lead to security issues if the emails are not verified.

Need another provider? Langfuse uses Auth.js, which integrates with [many providers](https://next-auth.js.org/providers/). Add a [feature request on GitHub](/ideas) if you want us to add support for a specific provider.

## Additional configuration

| Variable                            | Description                                                                                                                                                                                              |
| ----------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `AUTH_DOMAINS_WITH_SSO_ENFORCEMENT` | Comma-separated list of domains that are only allowed to sign in using SSO. Email/password sign in is disabled for these domains. E.g. `domain1.com,domain2.com`                                         |
| `AUTH_DISABLE_SIGNUP`               | Set to `true` to disable sign up for new users. Only existing users can sign in. This affects all new users that try to sign up, also those who received an invite to a project and have no account yet. |
| `AUTH_SESSION_MAX_AGE`              | Set the maximum age of the session (JWT) in minutes. The default is 30 days (`43200`). The value must be greater than 5 minutes, as the front-end application refreshes its session every 5 minutes.     |
